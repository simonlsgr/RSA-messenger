import sqlite3

conn = sqlite3.connect('backend_tests/users.db')
cur = conn.cursor()

cur.execute(""" 
CREATE TABLE IF NOT EXISTS messages_RAM (
    message_id INTEGER PRIMARY KEY AUTOINCREMENT,
    receiver_id INTEGER NOT NULL,
    sender_id INTEGER NOT NULL,
    encrypted_ciphertext VARCHAR(1) NOT NULL,
    tag VARCHAR(1) NOT NULL,
    encrypted_ciphertext_byte_length VARCHAR(1) NOT NULL,
    tag_byte_length  VARCHAR(1) NOT NULL,
    encrypted_symmetric_key VARCHAR(1) NOT NULL,
    encrypted_nonce VARCHAR(1) NOT NULL,
    encrypted_symmetric_key_byte_length VARCHAR(1) NOT NULL,
    encrypted_nonce_byte_length VARCHAR(1) NOT NULL,
    public_key_rsa_n VARCHAR(1) NOT NULL,
    date_sent DATETIME NOT NULL,
    FOREIGN KEY (receiver_id) REFERENCES users(id),
    FOREIGN KEY (sender_id) REFERENCES users(id)
)
""")

# {'encrypted_ciphertext': 763841750537981767553619921374587872726050862123982968760460986052265979, 'tag': 245645840059769144295161154255740442940, 'encrypted_ciphertext_byte_length': 30, 'tag_byte_length': 16, 'encrypted_key': 424651062653798517662481248741748550370096226102303684281857498559482304497279245866224957208657702796087564635864578631777414988201523779874610984849297606245748767823681449901580458447387632192709141686058308872191464503565917288234734552469567871528016510453901185776007118878297316972231926603320214174131438138777755784738374064291279760714855555691230332810485688255762468150126197885447144496904510, 'encrypted_nonce': 195157988072868542825314503113498884027504514973588736423786589571557876000714458167613894198288819517349926466366290112269165464334831536232558911163340002812752732220425198367165940976815573414952760503359793928538435668601479771909306436214240467988004110626302143043091278336470972974258059250842999347244657786470917634360597580540160031137105734811017965988120997336064611270211162865179468331816962, 'encrypted_key_byte_length': 16, 'encrypted_nonce_byte_length': 16}

receiver_id = 1
sender_id = 4
encrypted_ciphertext = "763841750537981767553619921374587872726050862123982968760460986052265979"
tag = "245645840059769144295161154255740442940"
encrypted_ciphertext_byte_length = "30"
tag_byte_length = "16"
encrypted_symmetric_key = "424651062653798517662481248741748550370096226102303684281857498559482304497279245866224957208657702796087564635864578631777414988201523779874610984849297606245748767823681449901580458447387632192709141686058308872191464503565917288234734552469567871528016510453901185776007118878297316972231926603320214174131438138777755784738374064291279760714855555691230332810485688255762468150126197885447144496904510"
encrypted_nonce = "195157988072868542825314503113498884027504514973588736423786589571557876000714458167613894198288819517349926466366290112269165464334831536232558911163340002812752732220425198367165940976815573414952760503359793928538435668601479771909306436214240467988004110626302143043091278336470972974258059250842999347244657786470917634360597580540160031137105734811017965988120997336064611270211162865179468331816962"
encrypted_symmetric_key_byte_length = "16"
encrypted_nonce_byte_length = "16"
public_key_rsa_n = "1727905906709714784706338886185660821489624319004546252486521182854131408326175142081155065283964279252264103247644151083170376041033786140063928678466115175854528569915314097064039396917343775112000218116052930220635874998816225153651390803092573075249639100354664945206705779738286705243578126677602991838639634011040225246154771737242342635106992300640238539502668063840304230884412268610826512661571833"
date_sent = "1970-01-01 00:00:00"


cur.execute("INSERT INTO messages_RAM (receiver_id, sender_id, encrypted_ciphertext, tag, encrypted_ciphertext_byte_length, tag_byte_length, encrypted_symmetric_key, encrypted_nonce, encrypted_symmetric_key_byte_length, encrypted_nonce_byte_length, public_key_rsa_n, date_sent)  VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", (receiver_id, sender_id, encrypted_ciphertext, tag, encrypted_ciphertext_byte_length, tag_byte_length, encrypted_symmetric_key, encrypted_nonce, encrypted_symmetric_key_byte_length, encrypted_nonce_byte_length, public_key_rsa_n, date_sent))
conn.commit()